---
description: >-
  Help developers to move from v2 to v3. Please read carefully and integrate the
  following breaking changes to ensure a smooth update.
---

# Upgrade to v3

## Breaking changes <a href="#breaking-changes" id="breaking-changes"></a>

### Cors configuration <a href="#cors-configuration" id="cors-configuration"></a>

Set CORS `credentials: true` if you're using custom CORS configuration.

{% code title="app.js" %}
```javascript
var express = require('express');
var cors = require('cors');

var app = express();

// ...

app.use(cors({
  origin: [/\.forestadmin\.com$/],
  allowedHeaders: ['Authorization', 'X-Requested-With', 'Content-Type'],
  credentials: true
}));

// ...

module.exports = app;
```
{% endcode %}

### Global smart action <a href="#global-smart-action" id="global-smart-action"></a>

Smart actions defined as follows `global: true` will no longer be considered as global.

Please now use `type: 'global'`.SQLMongodb

**Before**

{% code title="/forest/products.js" %}
```javascript
const Liana = require('forest-express-sequelize');
const models = require('../models');

Liana.collection('products', {
  actions: [{
    name: 'Import data',
    global: true
  }],

});
```
{% endcode %}

**After**

{% code title="/forest/products.js" %}
```javascript
const Liana = require('forest-express-sequelize');
const models = require('../models');

Liana.collection('products', {
  actions: [{
    name: 'Import data',
    type: 'global'
  }],

});
```
{% endcode %}

### Schema versioning <a href="#schema-versioning" id="schema-versioning"></a>

On server start - _only in development environments_ - the liana will generate a `.forestadmin-schema.json` file reflecting your **Forest Admin models**.

If you change your models, Forest Admin will automatically load a new schema to keep the layout up to date. However, note that changes in your database will not be reflected in your models nor in your UI, unless you use `lumber update` (for Lumber) or update your models manually otherwise.

**Do not edit this file**. It will be automatically generated on server start **only in development environments**.

This file **must be deployed** for any remote environment (staging, production, etc.), as it will be used to generate your Forest Admin UI.

**Version this file.** It will give you more visibility on the changes detected by Forest Admin.

In the following example, we have added two fields on the `invoices` table:

* `emailSent`
* `quadernoId`

Versioning the`.forestadmin-schema.json` file allows you to easily visualize the changes.![](https://gblobscdn.gitbook.com/assets%2F-LR7SWfEwsNtj\_ZiSkSA%2F-LcecOC6sl4pvNT7gLKI%2F-LcecRPYz9T0g\_e16FWT%2Fversioning.png?alt=media\&token=ded5a007-ccc7-4dd9-82ee-f939cf667a9f).forestadmin-schema.json versioning example

## Changelogs <a href="#changelogs" id="changelogs"></a>

This release note covers only the major changes. To learn more, please refer to the changelogs in our different repositories:

* ​[Rails changelog](https://github.com/ForestAdmin/forest-rails/blob/master/CHANGELOG.md)​
* ​[Express-sequelize changelog](https://github.com/ForestAdmin/forest-express-sequelize/blob/master/CHANGELOG.md#release-300---2019-04-22)​
* ​[Express-mongoose changelog](https://github.com/ForestAdmin/forest-express-mongoose/blob/master/CHANGELOG.md#release-300---2019-04-22)​

[\
](https://docs.forestadmin.com/documentation/v/v3/reference-guide/collaboration/control-your-activities)
